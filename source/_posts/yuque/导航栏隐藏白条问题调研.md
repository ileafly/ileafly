
title: 导航栏隐藏白条问题调研
date: 2018-11-20 16:44:39 +0800
tags: [实战]
categories: iOS
---

<a name="nlepfh"></a>
### [](#nlepfh)问题背景
阅读器页面需要一直隐藏导航栏，同时在正常阅读时隐藏状态栏，在调出上下菜单栏时显示状态栏，当菜单栏调出时可以push进入阅读器设置页面，当在阅读器设置页面快速手势返回进入阅读器页，再隐藏上下菜单栏时，在页面顶部留了一个20像素高的白色view。<br />![](https://cdn.nlark.com/yuque/0/2018/gif/183307/1542705090719-2362ae84-9806-442b-a8f8-02e2e2fc0a0f.gif#align=left&display=inline&height=690&originHeight=690&originWidth=388&status=done&width=268)

<a name="cpoflq"></a>
### [](#cpoflq)解决思路

1. 查看图层确认此白条是什么视图，经过确认是navigationBar里面的view

2. 怀疑是因为我先隐藏导航栏，再隐藏状态栏导致的

3. 考虑如何才能更好的管理隐藏导航栏和状态栏的流程

4. 打算新建一个项目，重现此问题进行调试和分析


<a name="91dsld"></a>
### [](#91dsld)问题重现
我新建了[StatusBarDemo](https://github.com/luzhiyongGit/iOS_Demos/tree/master/StatusBarDemo)用来重现这个问题，通过Demo我发现并没有重现此问题，这就很奇怪了，为何又无法重现这个问题呢？为了进一步分析此问题，我又查看了Demo的图层，通过对比我发现Demo中并不存在那个多余的view。<br />![](https://cdn.nlark.com/yuque/0/2018/png/183307/1542706774003-9579d0ea-3066-44d0-8db0-997972b0c31d.png#align=left&display=inline&height=271&originHeight=271&originWidth=243&status=done&width=195)<br />![](https://cdn.nlark.com/yuque/0/2018/png/183307/1542706807574-2351eeaf-3ff0-4cd1-bd4c-3fc124e883db.png#align=left&display=inline&height=223&originHeight=223&originWidth=262&status=done&width=194)

<a name="4ngnqh"></a>
### [](#4ngnqh)思路调整
为何项目中的导航栏会多一个view？什么情况下会多？<br />顺着这个思路调研发现正常情况下导航栏是不会出现这个view的，一定是哪里添加了这个view，这时我想到了项目中添加的一个三方库[WRNavigationBar_swift](https://github.com/wangrui460/WRNavigationBar_swift)，将这个三方库添加到Demo中一试，果然问题重现了。找到了原因接下来也就好解决了，因为[WRNavigationBar_swift](https://github.com/wangrui460/WRNavigationBar_swift)只是用来设置导航栏的颜色和字体颜色，完全可以移除这个库，在基类中自己设置，这样这个问题就解决了。

<a name="w9tpxf"></a>
### [](#w9tpxf)深入探究
[WRNavigationBar_swift](https://github.com/wangrui460/WRNavigationBar_swift)为什么要添加这个view呢？原来它在NavigationBar上添加了一个backgroundView，这样即使保留translucent属性为true，也不会因为透视而看到最下层的下拉刷新的图标等内容。


