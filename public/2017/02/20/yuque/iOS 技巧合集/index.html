<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Leafly的博客">
    <meta name="keyword" content="undefined">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        iOS 技巧合集 - Leafly的博客 | Leafly&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> talk is cheap, show me the code </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpeg">
        </div>
        <div class="name">
            <i>Leafly</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#一行命令，统计OC项目中每个源代码文件的行数以及总行数"><span class="toc-text">一行命令，统计OC项目中每个源代码文件的行数以及总行数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#复制字符串到剪贴板"><span class="toc-text">复制字符串到剪贴板</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#让子view不响应父view的手势"><span class="toc-text">让子view不响应父view的手势</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义xopen快捷打开工程"><span class="toc-text">自定义xopen快捷打开工程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CUICatalog-Invalid-asset-name-supplied"><span class="toc-text">CUICatalog Invalid asset name supplied</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#iOS导航栏显示与隐藏"><span class="toc-text">iOS导航栏显示与隐藏</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#iPhoneX-隐藏底部的Home条"><span class="toc-text">iPhoneX 隐藏底部的Home条</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#轻松搞定状态栏变化"><span class="toc-text">轻松搞定状态栏变化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#引导用户跳转AppStore设置支付方式"><span class="toc-text">引导用户跳转AppStore设置支付方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义代码片段"><span class="toc-text">自定义代码片段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#腾讯QMUI-Team开源的代码片段"><span class="toc-text">腾讯QMUI Team开源的代码片段</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Xcode控制台杂乱信息屏蔽"><span class="toc-text">Xcode控制台杂乱信息屏蔽</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> talk is cheap, show me the code </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        iOS 技巧合集
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2017-02-20 11:55:00</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#iOS" title="iOS">iOS</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>

    </div>
    <div class="post-content ">
        <p>tags: [iOS]<br>categories: 开发技巧<br>date: 2017-02-20 11:55:00</p>
<hr>
<p><a name="tf2kgf"></a></p>
<h4 id="一行命令，统计OC项目中每个源代码文件的行数以及总行数"><a href="#一行命令，统计OC项目中每个源代码文件的行数以及总行数" class="headerlink" title="一行命令，统计OC项目中每个源代码文件的行数以及总行数"></a><a href="#tf2kgf"></a>一行命令，统计OC项目中每个源代码文件的行数以及总行数</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ find . <span class="string">"("</span> -name <span class="string">"*.m"</span> -or -name <span class="string">"*.mm"</span> -or -name <span class="string">"*.cpp"</span> -or -name <span class="string">"*.h"</span> -or -name <span class="string">"*.rss"</span> <span class="string">")"</span> -print | xargs wc -l</span><br></pre></td></tr></table></figure>
<p><a name="8wricr"></a></p>
<h4 id="复制字符串到剪贴板"><a href="#复制字符串到剪贴板" class="headerlink" title="复制字符串到剪贴板"></a><a href="#8wricr"></a>复制字符串到剪贴板</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIPasteboard</span> *pasteboard = [<span class="built_in">UIPasteboard</span>  generalPasteboard];</span><br><span class="line">pasteborad.string = <span class="string">@"你需要复制的字符串"</span>;</span><br></pre></td></tr></table></figure>
<p><a name="s16fhl"></a></p>
<h4 id="让子view不响应父view的手势"><a href="#让子view不响应父view的手势" class="headerlink" title="让子view不响应父view的手势"></a><a href="#s16fhl"></a>让子view不响应父view的手势</h4><p>正常情况下，父view的手势在子view上点击也会响应，想要在子view中屏蔽父view的手势有以下方法：</p>
<ol>
<li><p>子view中再次添加手势，拦截掉父view的手势</p>
</li>
<li><p>实现父view的手势代理，在代理中拦截父view手势</p>
</li>
</ol>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)gestureRecognizer:(<span class="built_in">UIGestureRecognizer</span>  *)gestureRecognizer shouldReceiveTouch:(<span class="built_in">UITouch</span> *)touch &#123;</span><br><span class="line">    <span class="keyword">if</span> ([touch.view  isDescendantOfView:subview]) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="nognoh"></a></p>
<h4 id="自定义xopen快捷打开工程"><a href="#自定义xopen快捷打开工程" class="headerlink" title="自定义xopen快捷打开工程"></a><a href="#nognoh"></a>自定义xopen快捷打开工程</h4><p>利用ruby脚本在终端快速打开工程，ruby脚本内容如下：<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env ruby</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'shellwords'</span></span><br><span class="line"></span><br><span class="line">proj = Dir[<span class="string">'*.xcworkspace'</span>].first</span><br><span class="line">proj = Dir[<span class="string">'*.xcodeproj'</span>].first <span class="keyword">unless</span> proj</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> proj</span><br><span class="line">   puts <span class="string">"Opening  <span class="subst">#&#123;proj&#125;</span>"</span></span><br><span class="line">   <span class="string">`open <span class="subst">#&#123;proj&#125;</span>`</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  puts <span class="string">"No  xcworkspace|xcproj  file  found"</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>将脚本文件保存为<code>xopen</code>，拷贝到<code>/usr/local/bin</code>目录下，添加权限：<code>chmod 777 xopen</code><br>在终端中任何需要打开项目的位置，执行xopen即可。</p>
<p><a name="fqw2ll"></a></p>
<h4 id="CUICatalog-Invalid-asset-name-supplied"><a href="#CUICatalog-Invalid-asset-name-supplied" class="headerlink" title="CUICatalog Invalid asset name supplied"></a><a href="#fqw2ll"></a>CUICatalog Invalid asset name supplied</h4><p>项目中最近在打印<code>CUICatalog Invalid asset name supplied</code>，调研发现之所以输出这个log是因为传了一个空字符串来获取image，如果项目这种情况比较多，可以添加一个<code>symbolic breakpoint</code>来定位。<br><img src="https://cdn.nlark.com/yuque/0/2018/png/183307/1541845301865-3989fad5-4209-460a-8ec8-af444c4a9643.png#width=536" alt=""></p>
<p>需要说明一下，$arg3用于模拟器，$r0用于真机，除了传入值是nil的情况，还可能是@””，这种情况的判断规则是<code>[$arg3  length] == 0</code></p>
<p><a name="nim5dg"></a></p>
<h4 id="iOS导航栏显示与隐藏"><a href="#iOS导航栏显示与隐藏" class="headerlink" title="iOS导航栏显示与隐藏"></a><a href="#nim5dg"></a>iOS导航栏显示与隐藏</h4><p>项目中可能存在需要特殊隐藏导航栏的页面，通常情况下我们只需要在特殊页面执行<code>viewWillAppear</code>时隐藏导航栏，再在<code>viewWillDisapper</code>时显示导航栏以确保不对需要正常显示导航栏的页面产生影响。不过在实际项目中，页面之间的情况远比我们想象的复杂，我们以A、B两个页面为例：</p>
<ul>
<li><p>A 显示 B 隐藏  这种情况下我们按照上述操作是没有问题的</p>
</li>
<li><p>A 隐藏 B 显示  这种情况下我们按照上述操作是没有问题的</p>
</li>
<li><p>A 隐藏 B 隐藏  这种情况下就会存在连续执行先显示、再隐藏的情况，频繁操作就会存在导航栏异常的情况</p>
</li>
</ul>
<p>为了解决这个问题，最佳方案应该是每个页面根据自身需要执行显示或隐藏导航栏的操作，如果让每个页面无形增加了代码量，而且不利于维护。为了进一步优化，我们可以利用<code>UINavigationControllerDelegate</code>做些文章。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ZYNavigationController</span>: <span class="title">UINavigationControllerDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">navigationController</span><span class="params">(<span class="number">_</span> navigationController: UINavigationController, willShow viewController: UIViewController, animated: Bool)</span></span> &#123;</span><br><span class="line">        <span class="comment">// 判断要显示的控制器是否是自己</span></span><br><span class="line">        <span class="keyword">let</span> isHidden = viewController.isKind(of: <span class="type">FourthViewController</span>.<span class="keyword">self</span>) || viewController.isKind(of: <span class="type">FirstViewController</span>.<span class="keyword">self</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.setNavigationBarHidden(isHidden, animated: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><a name="i5bdgx"></a></p>
<h4 id="iPhoneX-隐藏底部的Home条"><a href="#iPhoneX-隐藏底部的Home条" class="headerlink" title="iPhoneX 隐藏底部的Home条"></a><a href="#i5bdgx"></a>iPhoneX 隐藏底部的Home条</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)prefersHomeIndicatorAutoHidden &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>需要注意，Home条并不会立刻消失，而是延迟1~2秒后缓慢消失</p>
<p><a name="hhsehy"></a></p>
<h4 id="轻松搞定状态栏变化"><a href="#轻松搞定状态栏变化" class="headerlink" title="轻松搞定状态栏变化"></a><a href="#hhsehy"></a>轻松搞定状态栏变化</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当设置statusBarHidden时，调用setNeedsStatusBarAppearanceUpdate立即更新状态栏</span></span><br><span class="line"><span class="keyword">var</span> isStatusBarHidden: <span class="type">Bool</span> = <span class="literal">false</span> &#123;</span><br><span class="line">    <span class="keyword">didSet</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.setNeedsStatusBarAppearanceUpdate()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 状态栏样式 </span></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> preferredStatusBarStyle: <span class="type">UIStatusBarStyle</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> .lightContent</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  状态栏是否隐藏   </span></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> prefersStatusBarHidden: <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> isStatusBarHidden</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a name="sydfiq"></a></p>
<h4 id="引导用户跳转AppStore设置支付方式"><a href="#引导用户跳转AppStore设置支付方式" class="headerlink" title="引导用户跳转AppStore设置支付方式"></a><a href="#sydfiq"></a>引导用户跳转AppStore设置支付方式</h4><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="built_in">UIApplication</span> sharedApplication] openURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@"https://buy.itunes.apple.com/WebObjects/MZFinance.woa/wa/editAddress?mt=8"</span>]];</span><br></pre></td></tr></table></figure>
<p><a name="rgslgc"></a></p>
<h4 id="自定义代码片段"><a href="#自定义代码片段" class="headerlink" title="自定义代码片段"></a><a href="#rgslgc"></a>自定义代码片段</h4><p>Xcode可以添加一段代码的快捷方式：</p>
<ol>
<li><p>将要添加的代码选中，拖拽到Code Snippets区域</p>
</li>
<li><p>在弹框里对代码片段进行编辑，将想要方便更换的内容以<code>&lt;#  #&gt;</code>包裹，对应内容就是可变内容啦</p>
</li>
<li><p>在<code>Completion  Shortcut</code>一栏可以填入快捷标记</p>
</li>
<li><p>完成以上步骤后，在需要使用相关代码片段时，只需要输入快捷标记就能快速输入代码片段</p>
</li>
</ol>
<p><a name="6l0pqp"></a></p>
<h4 id="腾讯QMUI-Team开源的代码片段"><a href="#腾讯QMUI-Team开源的代码片段" class="headerlink" title="腾讯QMUI Team开源的代码片段"></a><a href="#6l0pqp"></a>腾讯QMUI Team开源的代码片段</h4><p>腾讯QMUI Team开源了他们经常使用的代码片段，非常全面，下载后存放在<strong>~/Library/Developer/Xcode/UserData/CodeSnippets</strong>目录下即可。<br><a href="https://github.com/QMUI/QMUI_iOS_CodeSnippets" target="_blank" rel="noopener">qmui-ios-codesnippets</a><br><a name="30i5og"></a></p>
<h4 id="Xcode控制台杂乱信息屏蔽"><a href="#Xcode控制台杂乱信息屏蔽" class="headerlink" title="Xcode控制台杂乱信息屏蔽"></a><a href="#30i5og"></a>Xcode控制台杂乱信息屏蔽</h4><p>Xcode升级后，运行项目会打印一堆杂乱的log信息，虽然不影响App的功能，但是会对问题定位产生影响。为了解决这个我们可以在scheme里设置<code>os_activity_mode</code>为disable。这里有两个注意点：</p>
<ol>
<li>NSLog打印的信息也会被一并屏蔽掉  解决方案：使用printf替代NSLog </li>
</ol>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#ifdef DEBUG</span></span><br><span class="line"><span class="meta">#define NSLog(format, ...) printf(<span class="meta-string">"\n[%s] %s [第%d行] %s\n"</span>, __TIME__, __FUNCTION__, __LINE__, [[NSString stringWithFormat:format, ## __VA_ARGS__] UTF8String]);</span></span><br><span class="line"><span class="meta">#else</span></span><br><span class="line"><span class="meta">#define NSLog(format, ...)</span></span><br><span class="line"><span class="meta">#endif</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>swift的print打印信息不受影响</li>
</ol>

        
        <br>
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank" href="https://github.com/luzhiyongGit">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = ""
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script type="text/javascript">
       (function() {
           if (typeof LivereTower === 'function') { return; }

           var j, d = document.getElementById('lv-container');

           d.setAttribute('data-id','city');
           d.setAttribute('data-uid' , 'MTAyMC80MTAwNC8xNzUyOQ==');

           j = document.createElement('script');
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;

           d.appendChild(j);
       })();
    </script>
    <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
    </div>

</html>
