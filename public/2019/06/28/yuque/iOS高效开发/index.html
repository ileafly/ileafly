<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Leafly的博客"><title>iOS高效开发 | Leafly</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">iOS高效开发</h1><a id="logo" href="/.">Leafly</a><p class="description">talk is cheap, show me the code</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">iOS高效开发</h1><div class="post-meta">Jun 28, 2019<span> | </span><span class="category"><a href="/categories/iOS/">iOS</a></span></div><div class="post-content"><p>工欲善其事必先利其器，合理的利用工具，提升开发效率，不仅仅帮助我们节省时间，关键是能帮我们从一些重复、低效的工作中抽离出来，专注于有挑战，有深度的问题，不断提升自己。这里总结一些我在日常开发中提升开发效率的一些技巧，如果您有更好的提升效率的方法也请不吝赐教。</p>
<p><a name="RxXxI"></a></p>
<h2 id="xopen快捷脚本"><a href="#xopen快捷脚本" class="headerlink" title="xopen快捷脚本"></a>xopen快捷脚本</h2><p>自定义xopen快捷脚本，在终端中快速打开项目<br><img src="https://cdn.nlark.com/yuque/0/2019/gif/183307/1562028112900-78c7a90a-d135-43da-bda3-a8f633731c6d.gif#align=left&amp;display=inline&amp;height=410&amp;originHeight=410&amp;originWidth=656&amp;status=done&amp;width=656" alt=""></p>
<p>详细步骤：</p>
<ol>
<li><p>创建一个xopen文件 文件内容如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env ruby</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'shellwords'</span></span><br><span class="line"></span><br><span class="line">proj = Dir[<span class="string">'*.xcworkspace'</span>].first</span><br><span class="line">proj = Dir[<span class="string">'*.xcodeproj'</span>].first <span class="keyword">unless</span> proj</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> proj</span><br><span class="line">   puts <span class="string">"Opening  <span class="subst">#&#123;proj&#125;</span>"</span></span><br><span class="line">   <span class="string">`open <span class="subst">#&#123;proj&#125;</span>`</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  puts <span class="string">"No  xcworkspace|xcproj  file  found"</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将 <code>xopen</code> 文件移入 <code>/usr/local/bin</code> 目录下 并执行chmod 777添加读写权限</p>
</li>
</ol>
<p><a name="6OWDd"></a></p>
<h2 id="代码片段"><a href="#代码片段" class="headerlink" title="代码片段"></a>代码片段</h2><p>Xcode为我们提供了一些代码片段，但是不够全面，不过Xcode支持我们自己添加代码片段，通过添加常用的代码片段，可以极大的节省开发效率。<br>腾讯的QMUI团队开源了一份他们总结的代码片段库_<a href="https://github.com/QMUI/QMUI_iOS_CodeSnippets" target="_blank" rel="noopener">qmui-ios-codesnippets</a>，_集成他们的代码片段库就能满足日常的开发需求，提升coding的效率。</p>
<p><a name="nm4ba"></a></p>
<h2 id="fastlane"><a href="#fastlane" class="headerlink" title="fastlane"></a>fastlane</h2><p><a href="">fastlane</a>是一套ruby编写的持续集成工具集。通过fastlane可以实现自动打包、发布等工作。<br>原先我都是利用Xcode提供的 <code>xcodebuild</code> 命令自定义了一个 <code>xpublish</code> 脚本来进行打包，详细的配置过程可以参考：<a href="https://juejin.im/post/5be2e07fe51d454d5c7c2b96" target="_blank" rel="noopener">iOS–两套自动打包脚本</a>，不过当我发现有 <code>fastlane</code> 这个神器后果断放弃了原来使用的脚本，主要原因当然还是 <code>fastlane</code> 更加全面和强大。 <code>fastlane</code> 的集成过程比较简单，网上有很多资料，可以参考<a href="https://whlsxl.github.io/fastlane1/" target="_blank" rel="noopener">小团队的自动化发布–Fastlane带来的全自动化发布</a>。<br>因为我们项目已经使用Jenkins进行持续集成，日常使用 <code>fastlane</code> 并不多，主要会在偶尔打单独的测试包或审核包时才会使用，这里简单总结一下我的fastlane配置。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">default_platform(<span class="symbol">:ios</span>)</span><br><span class="line"></span><br><span class="line">platform <span class="symbol">:ios</span> <span class="keyword">do</span></span><br><span class="line">  desc <span class="string">"send ipa to pgyer"</span></span><br><span class="line">  lane <span class="symbol">:pgyer</span> <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># 执行pod install 需要在Gemfile里配置cocoapods</span></span><br><span class="line">    cocoapods(</span><br><span class="line">      <span class="symbol">clean:</span> <span class="literal">true</span>,</span><br><span class="line">      <span class="symbol">podfile:</span> <span class="string">"./Podfile"</span></span><br><span class="line">    )</span><br><span class="line">    <span class="comment"># 打包项目</span></span><br><span class="line">    build_app(<span class="symbol">workspace:</span> <span class="string">"****.xcworkspace"</span>, <span class="symbol">scheme:</span> <span class="string">"****"</span>, <span class="symbol">export_method:</span> <span class="string">"ad-hoc"</span>, <span class="symbol">output_directory:</span> <span class="string">"./fastlane/package"</span>, <span class="symbol">configuration:</span> <span class="string">"Release"</span>)</span><br><span class="line">    <span class="comment"># 上传蒲公英 需要先安装蒲公英插件</span></span><br><span class="line">    pgyer(<span class="symbol">api_key:</span> <span class="string">"********"</span>, <span class="symbol">user_key:</span> <span class="string">"**********"</span>)</span><br><span class="line">    <span class="comment"># 上传完成后 发送消息通知 避免忘记</span></span><br><span class="line">    notification(<span class="symbol">subtitle:</span> <span class="string">"Finished Uploading"</span>, <span class="symbol">message:</span> <span class="string">"upload success"</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>有几点说明：</p>
<ol>
<li>支持cocoapods需要在Gemfile里配置一下</li>
</ol>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置cocoapods，并指定版本</span></span><br><span class="line">gem <span class="string">'cocoapods'</span>, <span class="string">'1.7.1'</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>蒲公英的插件安装命令</li>
</ol>
<p><code>fastlane add_plugin pgyer</code> </p>
<p>安装完后的Gemfile:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">source <span class="string">"https://rubygems.org"</span></span><br><span class="line"></span><br><span class="line">gem <span class="string">"fastlane"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置cocoapods，并指定版本</span></span><br><span class="line">gem <span class="string">'cocoapods'</span>, <span class="string">'1.7.1'</span></span><br><span class="line"></span><br><span class="line">plugins_path = File.join(File.dirname(__FILE_<span class="number">_</span>), <span class="string">'fastlane'</span>, <span class="string">'Pluginfile'</span>)</span><br><span class="line">eval_gemfile(plugins_path) <span class="keyword">if</span> File.exist?(plugins_path)</span><br></pre></td></tr></table></figure></p>
<p>更多关于 <code>fastlane</code> 的功能可以查看<a href="https://docs.fastlane.tools/actions/" target="_blank" rel="noopener">官方文档中的Actions</a>。</p>
<p><a name="wtjSf"></a></p>
<h2 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a>Jenkins</h2><p><a href="">Jenkins</a>是一款开源的CI工具，利用Jenkins可以通过规范化的操作流程避免一些低级错误，将开发人员从简单、繁琐的工作中释放出来。关于Jenkins的配置教程网上也是有很多，<a href="https://juejin.im/post/5ad6beff6fb9a028c06b5889" target="_blank" rel="noopener">Jenkins 持续集成使用教程</a>就比较详细。</p>
<p><a name="OTH2U"></a></p>
<h2 id="SwitchHosts"><a href="#SwitchHosts" class="headerlink" title="SwitchHosts"></a>SwitchHosts</h2><p><a href="">SwitchHosts</a>是一个开源的用于hosts管理和切换的软件。<br>对于绝大多数公司肯定存在测试环境和线上环境，通常我们需要在测试环境验证无误后才会发布到正式环境，这就需要客户端在开发阶段能够请求不同的服务器IP，利用 <code>SwitchHosts</code> 和 <code>Charles</code> 就能实现不修改客户端代码的情况下访问不同的服务器IP。这样做就能避免了客户端打包时需要根据需求切换访问地址，之前就有公司误将测试环境的App发布给用户的情况。</p>
</div><div class="tags"><a href="/tags/总结/">总结</a></div><div class="post-nav"><a class="pre" href="/2019/07/01/yuque/iOS封装SDK/">iOS封装SDK</a><a class="next" href="/2019/06/24/yuque/复盘一次内存优化/">复盘一次内存优化</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: '672129204f49cd5664c7',
  clientSecret: '57735927f823cfa24256debfb225c5935c2894f9',
  repo: 'ileafly.github.io',
  owner: 'ileafly',
  admin: ['ileafly'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"><input type="hidden" name="sitesearch" value="https://ileafly.github.io/ileafly"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/教程/" style="font-size: 15px;">教程</a> <a href="/tags/总结/" style="font-size: 15px;">总结</a> <a href="/tags/原理/" style="font-size: 15px;">原理</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/07/03/yuque/Webpack+Vue+VueRouter+ElementUI/">Webpack+Vue+VueRouter+ElementUI</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/02/yuque/阅读器翻页动画优化总结/">阅读器翻页动画优化总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/01/yuque/iOS封装SDK/">iOS封装SDK</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/28/yuque/iOS高效开发/">iOS高效开发</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/24/yuque/复盘一次内存优化/">复盘一次内存优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/11/yuque/弄透Block/">弄透Block</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/06/11/yuque/xopen快捷脚本/">xopen快捷脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/10/yuque/Github+Hexo搭建个人博客详细教程/">Github+Hexo搭建个人博客详细教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/09/yuque/使用语雀管理博客/">使用语雀管理博客</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Leafly.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>